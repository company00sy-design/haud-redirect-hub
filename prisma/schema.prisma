// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model RedirectLink {
  id          Int      @id @default(autoincrement())
  slug        String   @unique
  targetUrl   String
  title       String?
  description String?
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  clicks      Click[]
  
  @@map("redirect_links")
}

model Click {
  id            Int          @id @default(autoincrement())
  redirectLink  RedirectLink @relation(fields: [linkId], references: [id], onDelete: Cascade)
  linkId        Int
  userAgent     String?
  referer       String?
  ipAddress     String?
  country       String?
  city          String?
  source        String?      // 블로그 소스 (blog1, blog2, etc.)
  campaign      String?      // 캠페인 정보 (선택사항)
  clickedAt     DateTime     @default(now())
  
  @@map("clicks")
}
